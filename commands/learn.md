# /learn - 提取可重用模式

分析当前会话并提取值得保存为技能的模式。

## 触发条件

在解决了非平凡问题后，运行 `/learn` 来提取模式。

## 要提取的内容

寻找以下类型的模式:

### 1. 错误解决模式
- 发生了什么错误？
- 根本原因是什么？
- 如何修复的？
- 是否可用于类似错误？

### 2. 调试技术
- 非显而易见的调试步骤
- 有效的工具组合
- 诊断模式

### 3. 变通方案
- 库的怪癖
- API 限制
- 版本特定的修复

### 4. 项目特定模式
- 发现的代码库约定
- 做出的架构决策
- 集成模式

## 输出格式

创建技能文件到 `~/.claude/skills/learned/[pattern-name]_unverified.md`:

```markdown
# [描述性模式名称]

**提取日期:** YYYY-MM-DD
**置信度:** Speculation (未验证)
**上下文:** [简短描述何时适用]

## 问题
[这个模式解决什么问题 - 要具体]

## 解决方案
[模式/技术/变通方案]

## 示例
[代码示例（如果适用）]

## 触发条件
[什么情况应该激活这个技能]

## 验证状态
- [ ] 人工审查通过
- [ ] 多次成功使用
```

## 流程

1. 审查会话中可提取的模式
2. 识别最有价值/可重用的洞察
3. 起草技能文件
4. **询问用户确认**后再保存
5. 保存到 `~/.claude/skills/learned/`，使用 `_unverified` 后缀

## 验证升级路径

1. **Speculation**: 刚提取，未验证
2. **Inference**: 人工审查通过，移除 `_unverified` 后缀
3. **Fact**: 多次成功使用验证

## 不要提取的内容

- 简单的拼写错误修复
- 一次性问题（特定 API 中断等）
- 太过具体无法重用的模式

## 示例

```
用户: /learn

Claude: 我在这个会话中识别到以下可提取的模式:

**模式: Supabase RLS 策略调试**

当 Supabase 查询返回空结果但数据存在时:
1. 检查 RLS 策略是否启用
2. 验证 auth.uid() 匹配
3. 使用 service role key 测试绕过 RLS

是否要保存这个模式到 ~/.claude/skills/learned/supabase-rls-debug_unverified.md？
```

**记住**: 只提取能在未来会话中节省时间的模式。保持技能聚焦 - 一个技能一个模式。
