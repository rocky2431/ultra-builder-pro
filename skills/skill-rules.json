{
  "version": "4.3.2",
  "description": "UltraBuild Pro 4.3.2 Skill Auto-Trigger Rules - Priority Stack + Behavioral Directives Edition",
  "dualEngineConfig": {
    "enabled": true,
    "primaryBackend": "claude",
    "reviewBackend": "codex",
    "stuckDetection": {
      "maxRetries": 3,
      "sameErrorThreshold": 2,
      "roleSwapEnabled": true
    },
    "researchCollaboration": {
      "initiatorBackend": "claude",
      "verifierBackend": "codex",
      "minConfidence": 0.9,
      "requireSources": true
    },
    "documentCollaboration": {
      "draftBackend": "claude",
      "reviewBackend": "codex",
      "enhanceBackend": "codex",
      "finalBackend": "claude"
    },
    "productionGradeRequirements": {
      "prohibitedPatterns": ["TODO", "FIXME", "demo", "placeholder", "example only"],
      "minTestConfidence": 0.9,
      "minResearchConfidence": 0.9,
      "requireRealImplementation": true
    }
  },
  "commandSkillBindings": {
    "/ultra-init": [],
    "/ultra-research": ["syncing-docs", "guiding-workflow", "codex-research-gen"],
    "/ultra-plan": ["guarding-quality"],
    "/ultra-dev": ["guarding-quality", "guarding-git-workflow", "guarding-test-quality", "codex-reviewer"],
    "/ultra-test": ["guarding-test-quality", "guarding-quality", "codex-test-gen"],
    "/ultra-deliver": ["syncing-docs", "syncing-status", "guarding-quality", "codex-doc-reviewer"],
    "/ultra-status": ["syncing-status", "guiding-workflow"],
    "/ultra-think": ["guiding-workflow"]
  },
  "skills": {
    "guarding-quality": {
      "type": "guard",
      "enforcement": "auto",
      "priority": "high",
      "description": "Code quality guard - SOLID principles, complexity limits",
      "promptTriggers": {
        "keywords": ["refactor", "code review", "quality"],
        "intentPatterns": ["(fix|improve|optimize).*code"]
      },
      "fileTriggers": {
        "pathPatterns": ["**/*.ts", "**/*.tsx", "**/*.js", "**/*.py", "**/*.go", "**/*.vue"],
        "pathExclusions": ["**/node_modules/**", "**/*.test.*", "**/*.spec.*"]
      }
    },
    "guarding-test-quality": {
      "type": "guard",
      "enforcement": "auto",
      "priority": "high",
      "description": "Test quality guard - TAS scoring, mock ratio enforcement",
      "promptTriggers": {
        "keywords": ["test", "TAS", "coverage", "spec"],
        "intentPatterns": ["(write|add|fix).*test"]
      },
      "fileTriggers": {
        "pathPatterns": ["**/*.test.ts", "**/*.spec.ts", "**/*.test.js", "**/__tests__/**"]
      }
    },
    "guarding-git-workflow": {
      "type": "guard",
      "enforcement": "auto",
      "priority": "critical",
      "description": "Git workflow guard - safe commits, branch strategy",
      "promptTriggers": {
        "keywords": ["commit", "push", "merge", "rebase", "branch", "git"],
        "intentPatterns": ["git (commit|push|merge|rebase)"]
      }
    },
    "syncing-status": {
      "type": "sync",
      "enforcement": "auto",
      "priority": "medium",
      "description": "Status sync - task progress, test results",
      "promptTriggers": {
        "keywords": ["status", "progress", "task", "done"],
        "intentPatterns": ["(what|show|check).*status"]
      }
    },
    "syncing-docs": {
      "type": "sync",
      "enforcement": "suggest",
      "priority": "medium",
      "description": "Documentation sync - ADR, research reports",
      "promptTriggers": {
        "keywords": ["document", "ADR", "research", "architecture"],
        "intentPatterns": ["(update|write|create).*doc"]
      }
    },
    "guiding-workflow": {
      "type": "utility",
      "enforcement": "suggest",
      "priority": "low",
      "description": "Workflow guidance - next step suggestions",
      "promptTriggers": {
        "keywords": ["next", "workflow", "what should"],
        "intentPatterns": ["what.*next"]
      }
    },
    "frontend": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "high",
      "description": "Frontend development - React/Vue/Next.js patterns",
      "promptTriggers": {
        "keywords": ["React", "Vue", "Next.js", "component", "UI", "CSS", "frontend"],
        "intentPatterns": ["(build|create|fix).*component"]
      },
      "fileTriggers": {
        "pathPatterns": ["**/*.tsx", "**/*.vue", "**/components/**", "**/pages/**"]
      }
    },
    "backend": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "high",
      "description": "Backend development - API/database/security",
      "promptTriggers": {
        "keywords": ["API", "REST", "GraphQL", "database", "server", "auth", "backend"],
        "intentPatterns": ["(create|build|fix).*api"]
      },
      "fileTriggers": {
        "pathPatterns": ["**/api/**", "**/server/**", "**/controllers/**", "**/routes/**"]
      }
    },
    "smart-contract": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "high",
      "description": "Smart contract development - EVM/Solana/security audit",
      "promptTriggers": {
        "keywords": ["contract", "solidity", "ERC", "web3", "blockchain"],
        "intentPatterns": ["(write|audit|deploy).*contract"]
      },
      "fileTriggers": {
        "pathPatterns": ["**/*.sol", "**/contracts/**", "**/foundry/**"]
      }
    },
    "codex-reviewer": {
      "type": "dual-engine",
      "enforcement": "auto",
      "priority": "critical",
      "backend": "codex",
      "description": "Codex code review - quality feedback, bug detection, security audit",
      "promptTriggers": {
        "keywords": ["review", "codex", "feedback"],
        "intentPatterns": ["codex.*(review|check)"]
      },
      "triggerAfter": ["Edit", "Write"],
      "reviewDimensions": {
        "correctness": 40,
        "security": 30,
        "performance": 20,
        "maintainability": 10
      },
      "qualityThreshold": 80
    },
    "codex-test-gen": {
      "type": "dual-engine",
      "enforcement": "auto",
      "priority": "critical",
      "backend": "codex",
      "description": "Codex test generation - production-grade tests with 6D coverage, no TODO/mock/demo",
      "promptTriggers": {
        "keywords": ["generate test", "test case"],
        "intentPatterns": ["(generate|create).*test"]
      },
      "testDimensions": ["functional", "boundary", "exception", "performance", "security", "compatibility"],
      "prohibitedPatterns": ["TODO", "FIXME", "expect(true).toBe(true)", "jest.mock('../", "vi.mock('../", ".skip(", ".todo("],
      "minTAS": 70,
      "minCoverage": 80,
      "maxMockRatio": 0.3
    },
    "codex-doc-reviewer": {
      "type": "dual-engine",
      "enforcement": "suggest",
      "priority": "medium",
      "backend": "codex",
      "description": "Codex documentation review - technical accuracy, completeness, examples",
      "promptTriggers": {
        "keywords": ["doc review", "document feedback"],
        "intentPatterns": ["review.*doc"]
      },
      "docDimensions": ["accuracy", "completeness", "clarity", "practicality"],
      "qualityThreshold": 80
    },
    "codex-research-gen": {
      "type": "dual-engine",
      "enforcement": "auto",
      "priority": "high",
      "backend": "codex",
      "description": "Codex research enhancement - evidence-based analysis, 90%+ confidence, production examples",
      "promptTriggers": {
        "keywords": ["research", "compare", "technology", "library", "framework"],
        "intentPatterns": ["(research|compare|analyze).*(technology|library|framework|approach)"]
      },
      "researchDimensions": ["feasibility", "risk", "complexity", "production-readiness"],
      "minConfidence": 0.9,
      "requireSources": true,
      "prohibitedPatterns": ["TODO", "demo", "placeholder", "example only"]
    }
  }
}
