{
  "version": "1.1",
  "description": "Ultra Builder Pro 4.1 - Skill activation rules",
  "sharedPatterns": {
    "codeFiles": ["**/*.ts", "**/*.js", "**/*.tsx", "**/*.jsx", "**/*.py", "**/*.vue"],
    "styleFiles": ["**/*.css", "**/*.scss", "**/*.styled.ts"],
    "testFiles": ["**/*.test.*", "**/*.spec.*", "**/e2e/**"],
    "docFiles": ["specs/**/*.md", ".ultra/docs/**/*.md", "docs/**/*.md", "**/README.md"],
    "exclusions": ["**/node_modules/**", "**/dist/**", "**/build/**"]
  },
  "skills": {
    "syncing-docs": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "medium",
      "promptTriggers": {
        "keywords": ["documentation", "docs", "ADR", "architecture decision", "specs", "sync docs"],
        "intentPatterns": ["(create|update|sync).*?(doc|specs)", "(add|create).*?ADR"]
      },
      "fileTriggers": {
        "pathPatterns": "$docFiles"
      }
    },
    "automating-e2e-tests": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "high",
      "promptTriggers": {
        "keywords": ["E2E test", "Playwright", "browser automation", "Core Web Vitals", "LCP", "INP", "CLS"],
        "intentPatterns": ["(create|write).*?E2E.*?test", "(test|automate).*?user flow", "Core Web Vitals"]
      },
      "fileTriggers": {
        "pathPatterns": ["**/e2e/**/*.spec.ts", "**/playwright/**"]
      }
    },
    "compressing-context": {
      "type": "system",
      "enforcement": "auto",
      "priority": "critical",
      "promptTriggers": {
        "keywords": ["context overflow", "token limit", "compress session", "archive session"],
        "intentPatterns": ["context.*(overflow|limit)", "token.*(exceed|limit)", "(compress|archive).*?session"]
      }
    },
    "guiding-workflow": {
      "type": "system",
      "enforcement": "auto",
      "priority": "high",
      "promptTriggers": {
        "keywords": ["what's next", "next step", "what now", "next command", "workflow"],
        "intentPatterns": ["what.*?(next|now)", "next.*?(step|command)"]
      }
    },
    "guarding-quality": {
      "type": "guardrail",
      "enforcement": "suggest",
      "priority": "high",
      "promptTriggers": {
        "keywords": ["SOLID", "DRY", "KISS", "YAGNI", "refactor", "test coverage", "code quality", "UI", "CSS"],
        "intentPatterns": ["(check|improve).*?(code|quality|test|coverage)", "(write|add).*?test"]
      },
      "fileTriggers": {
        "pathPatterns": ["$codeFiles", "$styleFiles", "$testFiles"],
        "pathExclusions": "$exclusions"
      }
    },
    "guarding-git-workflow": {
      "type": "guardrail",
      "enforcement": "block",
      "priority": "critical",
      "promptTriggers": {
        "keywords": ["force push", "hard reset", "git rebase", "delete branch", "unified branch"],
        "intentPatterns": ["git.*(force|--force)", "git.*reset.*--hard", "git.*rebase"]
      },
      "blockMessage": "GIT WORKFLOW GUARDIAN: Dangerous operation detected. Review guarding-git-workflow skill before proceeding."
    },
    "syncing-status": {
      "type": "system",
      "enforcement": "auto",
      "priority": "high",
      "promptTriggers": {
        "keywords": ["task completed", "tests pass", "tests fail", "coverage", "feature status", "status update"],
        "intentPatterns": ["task.*complete", "tests?.*(pass|fail)", "update.*status", "feature.*status"]
      },
      "fileTriggers": {
        "pathPatterns": [".ultra/tasks/tasks.json", ".ultra/docs/feature-status.json"]
      }
    },
    "guarding-test-quality": {
      "type": "guardrail",
      "enforcement": "block",
      "priority": "critical",
      "description": "Detects fake/useless tests through TAS (Test Authenticity Score) analysis",
      "promptTriggers": {
        "keywords": ["test quality", "TAS score", "mock ratio", "fake tests", "tautology", "assertion count", "over-mocking"],
        "intentPatterns": ["(check|analyze).*?test.*?quality", "(fake|useless).*?test", "TAS.*?(score|analysis)", "mock.*?ratio"]
      },
      "fileTriggers": {
        "pathPatterns": ["**/*.test.ts", "**/*.spec.ts", "**/*.test.js", "**/*.spec.js"],
        "pathExclusions": ["**/node_modules/**", "**/dist/**"]
      },
      "blockMessage": "TEST QUALITY GUARDIAN: TAS analysis required before task completion. Tests with TAS <70% will block completion."
    }
  }
}
